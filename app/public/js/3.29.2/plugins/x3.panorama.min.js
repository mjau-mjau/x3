/* www.photo.gallery X3.29.2 / x3.panorama.min.js / 2020-06-25 */
!function(){function e(e,t,n){O("panorama / "+e,t,n)}var t=!1,a=0;if(window.WebGLRenderingContext)try{var s=document.createElement("canvas");if(s.getContext){var l=s.getContext("webgl")||s.getContext("experimental-webgl");(t=!!(l&&l instanceof WebGLRenderingContext))&&(a=l.getParameter(l.MAX_TEXTURE_SIZE)),e("webgl_support: "+t,null,t?"log":"warn"),e("max_texture_size: "+a)}}catch(t){e("error while trying to detect WebGL",null,"error")}var c,u,d,f,h,m,v,g,_,x,w,y,b,M,C,P,k,E,L,R,j,A,I=x3_settings.plugins.panorama,T="hide"!==I.zoom,F=!1,V=I.autorotate_start,W=V&&I.autorotate_restart,N=!1,D=!1,U=0,G=!1,X=!1,B=x3_tests.is_pointer,Z=!1,J=[],Q={yaw:0,pitch:0,fov:.79},Y=window.devicePixelRatio||1,ee=window.screen.availWidth*Y>=640?640:320;function te(t,n,i){var o=-1,r=0,s={items:[],open:-1};return t.each((function(t,l){var p=$(l);"object"!=typeof p.data("panorama")&&function(t,n){var i=n.data("panorama"),o={},r=!1;i&&"string"==typeof i?i.split("&").forEach((function(e,t){var n=e.split("=");if(n.length>1&&n[1].length){var i=n[1];o[n[0]]=isNaN(i)?"true"===i||"false"!==i&&i:Number(i)}else isNaN(e)?["equirect","cube","flat"].indexOf(e)>-1?o.type=e:e.indexOf("/")>-1||e.match(/\.(jpeg|jpg)$/i)?r=e:o[n[0]]=null:(o.hasOwnProperty("width")?o.hasOwnProperty("height")||(o.height=Number(e)):o.width=Number(e),o.type="equirect")})):i&&"number"==typeof i&&(o.type="equirect",o.width=i),o.hasOwnProperty("type")||(o.hasOwnProperty("width")?o.type=isNaN(o.width)?"flat":"equirect":o.hasOwnProperty("levels")||o.hasOwnProperty("path")?o.type="cube":o.type="equirect");var s="equirect"===o.type?"source":"path",l=o[s]||r||t.getAttribute("data-href")||t.getAttribute("href")||!1;if(l&&(l=l.trim()),l&&(0!==l.toLowerCase().indexOf("http")&&(l.indexOf("content/")>-1?l=x3_settings.path+"/content/"+l.split("content/")[1]:0!==l.indexOf("/")&&(l=x3_settings.path+x3_settings.file_path+"/"+l)),"path"!==s||o.path||r||(l=l.replace(/\.(jpeg|jpg)$/i,"").replace(/\/(?=[^\/]*$)/,"/_"))),o[s]=l?S(l).chompRight("/").s:"none","equirect"===o.type){var p=o.width||n.data("width")||!1,c=o.height||n.data("height")||!1;p&&c||(p?c=Math.floor(p/2):c?p=Math.floor(2*c):(p=4096,c=2048)),o.width=p,o.height=c,p>a&&o.hasOwnProperty("source_4096")&&(null===o.source_4096||!0===o.source_4096)&&(o.source_4096=o.source.replace(/\.(jpeg|jpg)$/i,"_4096.$1"))}else if("flat"===o.type){if(o.hasOwnProperty("url_format")){var u=o.url_format.trim(),d=u.replace(/%0*?[v|y]/g,"{y}").replace(/%0*?[h|x]/g,"{x}").replace(/%0*?l/g,"{z}").replace(/(^|\/)l[0-9](_|\/)/g,"$1l{z}$2").replace(/%0*?c/g,"0");if(d!==o.url_format&&(o.url_format_original=o.url_format,o.url_format=d),!o.hasOwnProperty("index_start")){var f=u.match(/(^|\/)l([0-9])[_|\/]/);o.index_start=f?Math.min(1,f[2]):0}if(!o.hasOwnProperty("zero_padding")){var h=u.match(/%0+?[h|y]/);o.zero_padding=h?h[0].length-1:0}}if(o.hasOwnProperty("width")&&o.hasOwnProperty("height")){var m=o.width.split(","),v=o.height.split(",");o.levels=[],m.forEach((function(e,t){o.levels.push({width:parseInt(e),height:parseInt(v[t])})})),delete o.width,delete o.height}}e("params_to_object: "+i,o),n.data("panorama",o)}(l,p);var c=p.data("panorama");if(["equirect","cube"].indexOf(c.type)>-1){var u={};Object.keys(Q).forEach((function(e){var t=c.hasOwnProperty(e)?c[e]:I[e];t!==Q[e]&&(3.14===Math.abs(t)&&(t=Math.PI*(t>0?1:-1)),u[e]=t)}));var d=c.hasOwnProperty("maxVFov")?c.maxVFov:I.max_vfov,f=c.hasOwnProperty("maxHFov")?c.maxHFov:I.max_hfov;0===f&&(f=null);var h=c.hasOwnProperty("pitch_min")?c.pitch_min:I.pitch_min,m=c.hasOwnProperty("pitch_max")?c.pitch_max:I.pitch_max,v=(-90!==h||90!==m)&&Marzipano.RectilinearView.limit.pitch(h/180*Math.PI,m/180*Math.PI)}if("equirect"===c.type){var g=c.source.indexOf("/content/")>-1&&0!==c.source.toLowerCase().indexOf("http"),_=c.source,x=c.width;if(x>a)if(a>=4096&&c.hasOwnProperty("source_4096"))_=c.source_4096,x=4096;else{if(!g||!I.equirect_resize)return e("Error: Source ["+_+"] width ["+x+"] is > device max_texture_size ["+a+"] and equirect_resize option is disabled, or source is not in content path.",null,"warn"),i?ye(p):p.removeClass("x3-panorama"),!0;_=K(_,a),x=a}var w=[{width:x}],y=[_];if(g)if(c.hasOwnProperty("preview")?c.preview:I.equirect_preview){w.unshift({width:ee});var b=c.hasOwnProperty("source_4096")?c.source_4096:c.source;y.unshift(K(b,ee))}var z=c.maxResolution||I.maxres_multiplier*x/4;c.hasOwnProperty("maxResolution")||(c.maxResolution=z);var O=Marzipano.RectilinearView.limit.traditional(z,d,f),M=v?Marzipano.util.compose(O,v):O,C=new Marzipano.ImageUrlSource((function(e){return{url:y[e.z]}})),P=new Marzipano.EquirectGeometry(w),k=new Marzipano.RectilinearView(u,M)}else if("cube"===c.type){C=Marzipano.ImageUrlSource.fromString(c.path+"/{z}/{f}/{y}/{x}.jpg",{cubeMapPreviewUrl:c.path+"/preview.jpg"});var E=function(e){if("object"==typeof e)return e;for(var t=256,n=[{tileSize:256,size:256,fallbackOnly:!0}],i=0;i<e;i++)n.push({tileSize:512,size:t*=2});return n}(c.levels||3);P=new Marzipano.CubeGeometry(E),z=c.maxResolution||I.maxres_multiplier*(c.face_size||E[E.length-1].size);c.hasOwnProperty("maxResolution")||(c.maxResolution=z);O=Marzipano.RectilinearView.limit.traditional(z,d,f),M=v?Marzipano.util.compose(O,v):O,k=new Marzipano.RectilinearView(u,M)}else{if("flat"!==c.type)return!0;var L=c.tilesize||I.flat_tile_size,R=c.levels;R[1].width<R[0].width&&R.reverse();var j=R[R.length-1];C=function(e){var t=e.url_format||I.flat_url_format,n=e.hasOwnProperty("zero_padding")?e.zero_padding:I.flat_zero_padding,i=e.hasOwnProperty("index_start")?e.index_start:I.flat_index_start;return new Marzipano.ImageUrlSource((function(a){return{url:e.path+"/"+t.replace(/{z}|{y}|{x}/gi,(function(e){return"{z}"===e?a.z+i:"{y}"===e?S(a.y+i).padLeft(n,"0").s:"{x}"===e?S(a.x+i).padLeft(n,"0").s:void 0}))}}))}(c);R.forEach((function(e){e.tileWidth=L,e.tileHeight=L}));P=new Marzipano.FlatGeometry(R);var A=j.width/j.height,T=window.innerWidth/window.innerHeight,q=A>T?T/A:1;k=new Marzipano.FlatView({mediaAspectRatio:A,zoom:q},Marzipano.util.compose(Marzipano.FlatView.limit.resolution(j.width),Marzipano.FlatView.limit.letterbox()))}if(i&&p.addClass("x3-panorama"),c.index=r,c.hasOwnProperty("id")||(c.id=l.getAttribute("id")||(c.source||c.path).split("/").filter(Boolean).pop().replace(/\.(jpeg|jpg)$/i,"")),c.hasOwnProperty("title")||(c.title=l.getAttribute("data-title")||l.getAttribute("title")||c.id),c.title&&(c.title=c.title.charAt(0).toUpperCase()+c.title.slice(1)),c.exif=!!l.hasAttribute("data-exif")&&JSON.parse(l.getAttribute("data-exif")),c.description||(c.description=l.getAttribute("data-description")),c.date||(c.date=l.getAttribute("data-date")),c.geo){var F=c.geo.split(",");F.length>2&&(c.geo=F[0]+","+F[1],c.geo_zoom||(c.geo_zoom=parseInt(F[2])))}else c.geo=l.getAttribute("data-geo");-1===s.open&&(n===c.id?s.open=r:-1===o&&c.hasOwnProperty("open")&&(n?o=r:s.open=r)),c.scene_ob={source:C,geometry:P,view:k,pinFirstLevel:!!c.pinFirstLevel},c.original_view=k.parameters(),s.items.push(c),r++})),-1===s.open&&(s.open=o),e("pano_data ["+(i?"content":"gallery")+"]:",s),s}function ne(e,t,n){if(H.panorama.is_open)return!1;H.panorama.is_open=!0,c=e,U=t,Pe(!0);var a=c.items[t],r=I.scene_nav?c.items.length:1;r>1?c.items.forEach((function(e,t){e.scene=u.createScene(e.scene_ob)})):a.scene=u.createScene(a.scene_ob),I.reset_view&&a.scene_ob.view.setParameters(a.original_view),I.scene_nav&&C.toggleClass("hide",r<=1),I.index&&w.toggleClass("hide",r<=1),le(a,r),h.velocity("fadeIn",{duration:200,complete:function(){u.updateSize(),function(){if(!x3_tests.ios)return;i.on("orientationchange.pano",(function(e){var t=m[0].clientWidth,n=m[0].clientHeight;setTimeout((function(){m[0].clientWidth===t&&m[0].clientHeight===n||u.updateSize()}),500)}))}(),function(){if(!x3_tests.dual_input)return;var e;o.on("touchend.pano",(function(t){Z=!0,clearTimeout(e),e=setTimeout((function(){Z=!1}),300)}))}(),a.scene.switchTo({transitionDuration:Ae,transitionUpdate:Re()},(function(){!function(){x3_tests.mobile?g.add(_).addClass("pano-touch"):g.add(_).on("mouseenter.pano mouseleave.pano",(function(e){$(this).toggleClass("pano-hover","mouseenter"===e.type)}));if(!I.hide_interface)return void _e(!1);we(),m.on("mousemove.pano",$.throttle(Math.floor(I.hide_interface_timeout/10),!1,we)),x3_tests.touch&&(xe(g),xe(_))}(),(V||W)&&ue(!0),u.stage().addEventListener("renderComplete",Ce),function(){if("auto"!==I.zoom||!B)return;i.on("resize.pano",$.debounce(500,(function(e){se(c.items[U])})))}(),ze(a,r),oe(a,!0)})),G=n||p("pano")!=a.id&&!navigator.userAgent.match("CriOS"),history.pushState(null,a.id,"#pano="+a.id),i.one("popstate.pano",(function(e){ie(!1)})),function(e){o.on("keydown.pano",(function(e){[32,38,40].indexOf(e.which)>-1&&e.preventDefault()})),I.keyboard&&We.length&&(Ve=!1,b.find(".active").removeClass("active"),o.on("keydown.pano",(function(t){var n=t.which;if(Ve!==n){if(t.shiftKey&&e>1&&I.nav&&[37,39].indexOf(n)>-1)return!1;Ve=n,Ne(n,!0)}})));I.keyboard&&o.on("keyup.pano",(function(t){var n=t.which;if(t.shiftKey&&e>1&&[37,39].indexOf(n)>-1)ae(37===n?-1:1);else{if(27===n)return void ie(!0);if(32===n)return _e(!me),void(me&&g.add(_).removeClass("pano-hover"))}We.length&&Ne(n,!1)}))}(r)}})}function ie(e){if(!H.panorama.is_open)return!1;H.panorama.is_open=!1,I.autorotate_start?fe():ue(!1),[i,o,m,v,g,_].forEach((function(e){e.length&&e.off(".pano")})),G?e&&history.back():history.replaceState(null,document.title,location.pathname+location.search),F&&screenfull.exit(),h.velocity("fadeOut",{duration:200,complete:function(){Pe(!1),u.destroyAllScenes(),u.stage().removeEventListener("renderComplete",Ce),Ce(!0),_e(!0),g.add(_).removeClass("pano-hover")}})}function ae(e){oe(c.items[U]);var t=U+e,n=c.items.length;if(t<0||t>=n){if(!I.scene_loop)return;t=t<0?n-1:0}U=t;var i=c.items[U];I.reset_view&&i.scene_ob.view.setParameters(i.original_view),I.title&&"0"!=g.css("opacity")&&x.css("display","none"),n>1&&B&&E.add(L).css("display","none"),le(i,n),ve&&I.show_interface_after_nav&&we(),fe(),"opacity"!==Ee&&i.scene.layer().setEffects({opacity:0}),i.scene.switchTo({transitionDuration:je,transitionUpdate:Le()},(function(){V?de():W&&ue(!0),I.title&&!x.is(":visible")&&re(x,!0,3*e,300),n>1&&B&&!Z&&(P.is(":hover")&&re(E,!0,3*e,200),k.is(":hover")&&re(L,!0,3*e,200)),I.show_interface_after_nav&&(!I.hide_interface&&I.keyboard?_e(!1):me&&we()),ze(i,n),oe(i,!0)})),history.replaceState(null,i.id,"#pano="+i.id)}function oe(t,n){if("flat"===t.type){var i=Math.min(t.levels.length,t.pin_levels||I.flat_pin_levels);if(!(i<2))for(var a=t.scene.layer(),o=1;o<i;o++)e((n?"pinLevel":"unpinLevel")+"("+o+")"),a[n?"pinLevel":"unpinLevel"](o)}}function re(e,t,n,i,a){e.velocity("stop").velocity({opacity:t?[1,0]:[0,1],translateX:t?[0,n]:[n,0]},{duration:i||300,easing:"easeOutQuint",display:t?a||"auto":"none"})}function se(e){if("auto"===I.zoom&&B){var t=e.hasOwnProperty("zoom")?e.zoom:"flat"===e.type||e.maxResolution>window.innerWidth*Y;M.toggleClass("pano-zoom-hidden",!t)}}function le(e,t){var n=!!(e.exif||e.description||e.geo);if(A.length&&A.toggleClass("hide",!n),I.title&&y.toggleClass("pano-title-info",n),j.length&&j.toggleClass("hide","flat"===e.type),R.data("visible")&&R.toggleClass("hide","flat"===e.type),se(e),I.scene_nav&&t>1){var i=U<=0?t-1:U-1,a=U>=t-1?0:U+1,o=!1,r=!1;I.scene_loop||(o=i>=U,P.toggleClass("hide",o),r=a<=U,k.toggleClass("hide",r),B&&(E.toggleClass("hide",o),L.toggleClass("hide",r))),B&&(o||E.html(c.items[i].title),r||L.html(c.items[a].title))}I.index&&t>1&&w.text(U+1+" / "+t),I.title&&y.html(e.title)}e("Settings:",I),H.panorama.init_page=function(e,n){var i=e.is(".context");if(t){var a=te(n,!H.panorama.is_open&&p("pano"),i);a.items.length&&(e.on("click",".x3-panorama",(function(e){e.target!==this&&$(e.target).is("button, .button, [data-href]")||(e.stopImmediatePropagation(),e.preventDefault(),ne(a,$(this).data("panorama").index,!0))})),H.panorama.is_open||(a.open>-1?ne(a,a.open):I.auto_open&&!i&&ne(a,0)))}else i?n.each((function(e,t){ye($(t))})):n.removeClass("x3-panorama")},H.panorama.init_pano=function(){if(t){!function(){var e="",t="";(I.buttons?(I.buttons+",close").replace("close,","").split(","):["close"]).forEach((function(e,n){t+='<button type="button" class="pano-button pano-'+e+(["deviceorientation","fullscreen"].indexOf(e)>-1?" hide":"")+'"></button>'})),e+='<div class="pano-controls">'+t+"</div>";var n="";I.index&&(n+='<span class="pano-index"></span>'),I.title&&(n+='<span class="pano-title"></span>'),(n+='<span class="pano-spinner"></span>')&&(e+='<div class="pano-text">'+n+"</div>"),e&&(e='<div class="pano-topbar">'+e+"</div>");var i="";I.scene_nav&&(i+='<div class="pano-scene-nav"><button type="button" class="pano-button pano-previous"></button><div class="pano-text pano-title-previous"></div><button type="button" class="pano-button pano-next"></button><div class="pano-text pano-title-next"></div></div>');var a="";T&&(a+='<div class="pano-zoom"'+(I.nav?' style="margin-right: 1em;"':"")+'><button type="button" class="pano-button pano-zoom-out"></button><button type="button" class="pano-button pano-zoom-in"></button></div>'),I.nav&&(a+='<button type="button" class="pano-button pano-left"></button><div class="pano-up-down"><button type="button" class="pano-button pano-up"></button><button type="button" class="pano-button pano-down"></button></div><button type="button" class="pano-button pano-right"></button>'),a&&(i+='<div class="pano-nav">'+a+"</div>"),i&&(e+='<div class="pano-bottombar">'+i+"</div>"),e&&(e='<div id="pano-interface" class="pano-interface-hide'+(B?" pano-pointer":"")+'">'+e+"</div>"),o.append('<div id="pano-container">'+e+'<div id="pano"></div></div>')}(),h=o.find("#pano-container"),m=h.find("#pano"),v=h.find("#pano-interface");var e=(g=v.find(".pano-topbar")).find(".pano-controls");R=e.find(".pano-deviceorientation"),x=g.find(".pano-text"),w=x.find(".pano-index"),y=x.find(".pano-title"),Oe=x.find(".pano-spinner"),_=v.find(".pano-bottombar"),b=_.find(".pano-nav"),M=b.find(".pano-zoom"),C=_.find(".pano-scene-nav"),P=C.find(".pano-previous"),E=C.find(".pano-title-previous"),k=C.find(".pano-next"),L=C.find(".pano-title-next");var n=(T?89:0)+(I.nav?134:0);if(n){T&&I.nav&&(n+=16);var a=Math.round(n/2+60);I.scene_nav&&Ot("@media (min-width: 641px) { .pano-title-previous, .pano-title-next { max-width: calc(50% - "+a+"px); } }"),T&&I.nav&&(Ot("@media (min-width: 1025px) { .pano-nav { margin-left: -106px; } }"),I.scene_nav&&(Ot("@media (min-width: 1025px) { .pano-title-previous { max-width: calc(50% - "+(a+53)+"px); } }"),Ot("@media (min-width: 1025px) { .pano-title-next { max-width: calc(50% - "+(a-53)+"px); }")))}if(u=new Marzipano.Viewer(m[0]),I.nav&&J.push([b.find(".pano-up"),"y",-.5,.75],[b.find(".pano-down"),"y",.5,.75],[b.find(".pano-left"),"x",-1],[b.find(".pano-right"),"x",1]),T&&J.push([b.find(".pano-zoom-in"),"zoom",-1],[b.find(".pano-zoom-out"),"zoom",1]),I.keyboard&&J.push([38,"y",-.5,.75],[40,"y",.5,.75],[37,"x",-1],[39,"x",1],[187,"zoom",-1],[189,"zoom",1],[107,"zoom",-1],[109,"zoom",1],[87,"y",-.5,.75],[65,"x",-1],[83,"y",.5,.75],[68,"x",1],[81,"roll",-4,6],[69,"roll",4,6]),J.length){d=u.controls(),J.forEach((function(e,t){var n=.4*e[2],i=1.2*(e[3]||1),a="number"==typeof e[0]?new Marzipano.KeyControlMethod(e[0],e[1],n,i):new Marzipano.ElementPressControlMethod(e[0][0],e[1],n,i);d.registerMethod("c"+t,a,!0)}))}var r=e.find(".pano-close");r.length&&r.on("click",(function(e){ie(!0)})),(A=e.find(".pano-info")).length&&A.on("click",H),I.title&&y.on("click",(function(e){$(this).hasClass("pano-title-info")&&H()}));var s=e.find(".pano-reset-view");s.length&&s.on("click",(function(e){s.data("translating")||(s.data("translating",!0),u.lookTo(c.items[U].original_view,{transitionDuration:500},(function(){s.data("translating",!1)})))}));var l=Marzipano.dependencies.hammerjs,p=e.find(".pano-fullscreen");(I.fullscreen_taps||p.length)&&q("screenfull",(function(e){if(!e)return p.remove(),!1;(p.removeClass("hide").on("click",(function(){screenfull.toggle()})),I.fullscreen_taps)&&new l(m[0]).on(1===I.fullscreen_taps?"tap":"doubletap",(function(e){F||screenfull.request()}));function t(){F=screenfull.isFullscreen,p.toggleClass("pano-is-fullscreen",F)}screenfull.on("change",t),t()})),(j=e.find(".pano-rotate")).length&&j.on("click",(function(){ue(!V)}));var O=I.autorotate_speed;if(f=Marzipano.autorotate({yawSpeed:O,yawAccel:O/2,pitchSpeed:Math.max(O,.1),pitchAccel:Math.max(O/2,.05)}),I.lookto_taps){function S(e,t,n){var i=u["_hammerManager"+e];i.manager().add(new l.Tap({taps:t,posThreshold:n})),i.on("tap",(function(e){var t=u.view().screenToCoordinates(e.center);u.lookTo(t,{transitionDuration:500})}))}B&&S("Mouse",I.lookto_taps,20),x3_tests.touch&&S("Touch",I.lookto_taps,50)}if(R.length)if(x3_tests.device_orientation){function W(){q("DeviceOrientationControlMethod",(function(e){if(!e)return R.remove(),!1;d.registerMethod("deviceOrientation",new DeviceOrientationControlMethod),R.removeClass("hide").data("visible",!0).on("click",(function(e){ce(!D)}))}))}x3_tests.device_oriented?W():i.one("deviceorientation.panotest",(function(e){var t=e.originalEvent.alpha;null===t||isNaN(t)||W()}))}else R.remove();if(I.scene_nav){function N(e,t,n){e.on("click",$.throttle(500,!0,(function(){ae(n)}))),B&&e.on("mouseenter mouseleave",(function(e){Z||re(t,"mouseenter"===e.type,3*n)}))}N(P,E,-1),N(k,L,1)}}function H(){var e=c.items[U],t=!1,n='<h2 class="pano-info-title">'+e.title+"</h3>";if(e.date&&(n+='<time class="pano-info-date">'+e.date+"</time>"),e.exif&&(n+='<div class="pano-info-exif">'+z(e.exif)+"</div>"),e.description&&(n+='<p class="pano-info-description">'+e.description+"</p>"),e.geo){var i=document.documentElement.clientWidth;if(i<=640)t=Math.min(100*Math.ceil(i/100),640);else{var a=document.documentElement.clientHeight;t=a<800?400:a<950?500:640}n+='<a href="https://www.google.com/maps/search/?api=1&amp;query='+e.geo+'" class="pano-info-map" target="_blank"><div class="pano-info-map-container"><img src="https://maps.googleapis.com/maps/api/staticmap?'+(x3_tests.pixel_ratio>1?"scale=2&amp;":"")+"zoom="+(e.geo_zoom||12)+"&amp;size="+t+"x"+t+"&amp;markers="+e.geo+'&amp;key=AIzaSyDRp6xla9SxUmTBu6l_kprhjjI9e5-EVZk" class="pano-info-map-image"></div></a>'}var o=Se(n,t,"pano-info-modal");if(e.geo){var r=o.find(".pano-info-map-image");r.on("load",(function(e){r.css({opacity:1,transform:"scale(1)"})})),o.find(".pano-info-map").on("click",(function(t){ge("https://www.google.com/maps/embed/v1/place?q="+e.geo+"&amp;key=AIzaSyDRp6xla9SxUmTBu6l_kprhjjI9e5-EVZk",t).css("z-index",1542)}))}}};var pe=!1;function ce(e){D!==e&&(D=e,R.toggleClass("pano-is-deviceorientation",e),e?(pe=V,ue(!1),d.enableMethod("deviceOrientation")):(d.disableMethod("deviceOrientation"),pe&&ue(!0)))}function ue(e){N!==e&&(V=e,j.toggleClass("pano-rotating",e),e?de():fe())}function de(){N||(ce(!1),u.startMovement(f),u.setIdleMovement(I.autorotate_idlemovement_timeout,f),N=!0)}function fe(){N&&(u.stopMovement(),u.setIdleMovement(1/0),N=!1)}var he,me=!0,ve=!1;function _e(e){ve&&(ve=!1,clearTimeout(he)),me!==e&&(me=e,v.toggleClass("pano-interface-hide",e))}function xe(e){e.length&&e.on("touchstart.pano",".pano-button",(function(t){if("1"!=e.css("opacity"))return!1}))}function we(){_e(!1),ve=!0,he=setTimeout((function(){_e(!0)}),I.hide_interface_timeout)}function ye(e){var t=e.attr("data-href")||e.attr("href");t&&t.indexOf(".")>-1&&e.attr({"data-popup":"",rel:"pano-replacement-popup",href:(-1===t.indexOf("/")?x3_page.file_path+"/":"")+t.trim()})}function be(t){var n=c.items[t];n.scene_ob.pinFirstLevel||n.scene_ob.geometry.levelList.length<2||!u.hasScene(n.scene)||(e("pinFirstLevel: "+n.id),n.scene.layer().pinFirstLevel(),n.scene_ob.pinFirstLevel=!0)}function ze(e,t){t<2||setTimeout((function(){u.hasScene(e.scene)&&e.scene.visible()&&(be(U>=t-1?0:U+1),be(U<=0?t-1:U-1))}),2e3)}var Oe,Me=!1;function Ce(e){Me===e&&(Me=!Me,Oe.toggleClass("pano-spinning",Me))}function Pe(e){e!==X&&(e?(X=window.innerWidth-document.documentElement.clientWidth)&&(r[0].style["padding-right"]=X+"px",n[0].style.overflow="hidden"):(r[0].style.removeProperty("padding-right"),n[0].style.removeProperty("overflow"),X=!1))}var ke={opacity:function(){return function(e,t){var n=Fe(e),i={opacity:n};Te&&(i.rect=Te(n)),t.layer().setEffects(i)}},black:function(){return function(e,t,n){var i=Fe(e),a=i<.5,o=a?2*i:1-2*(i-.5),r=a?n.layer():t.layer(),s={colorOffset:[-o,-o,-o,0]};!a&&Te&&(s.rect=Te(i)),r.setEffects(s)}},black_first:function(){return function(e,t){var n=Fe(e),i=1-n,a={colorOffset:[-i,-i,-i,0]};Te&&(a.rect=Te(n)),t.layer().setEffects(a)}}},Ee=I.transition,Le=ke[Ee],Re="black"===Ee?ke.black_first:Le,je=I.transition_duration,Ae="black"===Ee?je/2:je,Ie=I.transition_scale;if(Ie&&je)var Te=function(e){return{relativeWidth:$e-e*Ie,relativeHeight:$e-e*Ie,relativeX:e*qe-qe,relativeY:e*qe-qe}},$e=1+Ie,qe=Ie/2;else Te=!1;function Fe(e){return-(Math.pow(e-1,4)-1)}var Ve=!1,We=(I.nav?[38,40,37,39]:[]).concat(T?[187,189]:[]);function Ne(e,t){var n=We.indexOf(e);if(n>-1){if(t&&"1"!=_.css("opacity"))return;Ve=!1,J[n][0].toggleClass("active",t)}}}();