/* www.photo.gallery X3.29.6 / x3.panorama.min.js / 2020-07-08 */
!function(){function e(e,t,n){j("panorama / "+e,t,n)}var t=!1,a=0;if(window.WebGLRenderingContext)try{var r=document.createElement("canvas");if(r.getContext){var p=r.getContext("webgl")||r.getContext("experimental-webgl");(t=!!(p&&p instanceof WebGLRenderingContext))&&(a=p.getParameter(p.MAX_TEXTURE_SIZE)),e("webgl_support: "+t,null,t?"log":"warn"),e("max_texture_size: "+a)}}catch(t){e("error while trying to detect WebGL",null,"error")}var c,u,d,h,m,v,g,_,x,w,y,b,z,O,M,C,P,k,R,A,I,T,q=x3_settings.plugins.panorama,F="hide"!==q.zoom,V=!1,W=q.autorotate_start,N=W&&q.autorotate_restart,D=!1,U=!1,G=0,X=!1,B=!1,K=x3_tests.is_pointer,Z=!1,J=[],Q={yaw:0,pitch:0,fov:.79},Y=window.devicePixelRatio||1,ee=window.screen.availWidth*Y>=640?640:320;function te(t,n,o){var r=-1,s=0,l={items:[],open:-1};return t.each((function(t,p){var c=$(p);"object"!=typeof c.data("panorama")&&function(t,n){var o=n.data("panorama"),r={},s=!1;o&&"string"==typeof o?o.split("&").forEach((function(e,t){var n=e.split("=");if(n.length>1&&n[1].length){var a=n[1];r[n[0]]=isNaN(a)?"true"===a||"false"!==a&&a:Number(a)}else isNaN(e)?["equirect","cube","flat"].indexOf(e)>-1?r.type=e:e.indexOf("/")>-1||e.match(/\.(jpeg|jpg)$/i)?s=e:r[n[0]]=null:(r.hasOwnProperty("width")?r.hasOwnProperty("height")||(r.height=Number(e)):r.width=Number(e),r.type="equirect")})):o&&"number"==typeof o&&(r.type="equirect",r.width=o),r.hasOwnProperty("type")||(r.hasOwnProperty("width")?r.type=isNaN(r.width)?"flat":"equirect":r.hasOwnProperty("levels")||r.hasOwnProperty("path")?r.type="cube":r.type="equirect");var l="equirect"===r.type?"source":"path",p=r[l]||s||t.getAttribute("data-href")||t.getAttribute("href")||!1;if(p&&(p=p.trim()),p&&(0!==p.toLowerCase().indexOf("http")&&(p.indexOf("content/")>-1?p=x3_settings.path+"/content/"+p.split("content/")[1]:0!==p.indexOf("/")&&(p=x3_settings.path+x3_settings.file_path+"/"+p)),"path"!==l||r.path||s||(p=p.replace(/\.(jpeg|jpg)$/i,"").replace(/\/(?=[^\/]*$)/,"/_"))),r[l]=p?S(p).chompRight("/").s:"none","equirect"===r.type){var c=r.width||n.data("width")||!1,u=r.height||n.data("height")||!1;c&&u||(c?u=Math.floor(c/2):u?c=Math.floor(2*u):(c=4096,u=2048)),r.width=c,r.height=u,c>a&&r.hasOwnProperty("source_4096")&&(null===r.source_4096||!0===r.source_4096)&&(r.source_4096=r.source.replace(/\.(jpeg|jpg)$/i,"_4096.$1"))}else if("flat"===r.type){if(r.hasOwnProperty("url_format")){var d=r.url_format.trim(),f=d.replace(/%0*?[v|y]/g,"{y}").replace(/%0*?[h|x]/g,"{x}").replace(/%0*?l/g,"{z}").replace(/(^|\/)l[0-9](_|\/)/g,"$1l{z}$2").replace(/%0*?c/g,"0");if(f!==r.url_format&&(r.url_format_original=r.url_format,r.url_format=f),!r.hasOwnProperty("index_start")){var h=d.match(/(^|\/)l([0-9])[_|\/]/);r.index_start=h?Math.min(1,h[2]):0}if(!r.hasOwnProperty("zero_padding")){var m=d.match(/%0+?[h|y]/);r.zero_padding=m?m[0].length-1:0}}if(r.hasOwnProperty("width")&&r.hasOwnProperty("height")){var v=r.width.split(","),g=r.height.split(",");r.levels=[],v.forEach((function(e,t){r.levels.push({width:parseInt(e),height:parseInt(g[t])})})),delete r.width,delete r.height}}e("params_to_object: "+o,r),n.data("panorama",r)}(p,c);var u=c.data("panorama");if(["equirect","cube"].indexOf(u.type)>-1){var d={};Object.keys(Q).forEach((function(e){var t=u.hasOwnProperty(e)?u[e]:q[e];t!==Q[e]&&(3.14===Math.abs(t)&&(t=Math.PI*(t>0?1:-1)),d[e]=t)}));var f=u.hasOwnProperty("maxVFov")?u.maxVFov:q.max_vfov,h=u.hasOwnProperty("maxHFov")?u.maxHFov:q.max_hfov;0===h&&(h=null);var m=u.hasOwnProperty("pitch_min")?u.pitch_min:q.pitch_min,v=u.hasOwnProperty("pitch_max")?u.pitch_max:q.pitch_max,g=(-90!==m||90!==v)&&Marzipano.RectilinearView.limit.pitch(m/180*Math.PI,v/180*Math.PI)}if("equirect"===u.type){var _=u.source.indexOf("/content/")>-1&&0!==u.source.toLowerCase().indexOf("http"),x=u.source,w=u.width;if(w>a)if(a>=4096&&u.hasOwnProperty("source_4096"))x=u.source_4096,w=4096;else{if(!_||!q.equirect_resize)return e("Error: Source ["+x+"] width ["+w+"] is > device max_texture_size ["+a+"] and equirect_resize option is disabled, or source is not in content path.",null,"warn"),o?ye(c):c.removeClass("x3-panorama"),!0;x=tt(x,a),w=a}var y=[{width:w}],b=[x];if(_)if(u.hasOwnProperty("preview")?u.preview:q.equirect_preview){y.unshift({width:ee});var z=u.hasOwnProperty("source_4096")?u.source_4096:u.source;b.unshift(tt(z,ee))}var O=u.maxResolution||q.maxres_multiplier*w/4;u.hasOwnProperty("maxResolution")||(u.maxResolution=O);var M=Marzipano.RectilinearView.limit.traditional(O,f,h),C=g?Marzipano.util.compose(M,g):M,P=new Marzipano.ImageUrlSource((function(e){return{url:b[e.z]}})),k=new Marzipano.EquirectGeometry(y),E=new Marzipano.RectilinearView(d,C)}else if("cube"===u.type){P=Marzipano.ImageUrlSource.fromString(u.path+"/{z}/{f}/{y}/{x}.jpg",{cubeMapPreviewUrl:u.path+"/preview.jpg"});var L=function(e){if("object"==typeof e)return e;for(var t=256,n=[{tileSize:256,size:256,fallbackOnly:!0}],i=0;i<e;i++)n.push({tileSize:512,size:t*=2});return n}(u.levels||3);k=new Marzipano.CubeGeometry(L),O=u.maxResolution||q.maxres_multiplier*(u.face_size||L[L.length-1].size);u.hasOwnProperty("maxResolution")||(u.maxResolution=O);M=Marzipano.RectilinearView.limit.traditional(O,f,h),C=g?Marzipano.util.compose(M,g):M,E=new Marzipano.RectilinearView(d,C)}else{if("flat"!==u.type)return!0;var R=u.tilesize||q.flat_tile_size,j=u.levels;j[1].width<j[0].width&&j.reverse();var A=j[j.length-1];P=function(e){var t=e.url_format||q.flat_url_format,n=e.hasOwnProperty("zero_padding")?e.zero_padding:q.flat_zero_padding,a=e.hasOwnProperty("index_start")?e.index_start:q.flat_index_start;return new Marzipano.ImageUrlSource((function(o){return{url:e.path+"/"+t.replace(/{z}|{y}|{x}/gi,(function(e){return"{z}"===e?o.z+a:"{y}"===e?S(o.y+a).padLeft(n,"0").s:"{x}"===e?S(o.x+a).padLeft(n,"0").s:void 0}))}}))}(u);j.forEach((function(e){e.tileWidth=R,e.tileHeight=R}));k=new Marzipano.FlatGeometry(j);var I=A.width/A.height,T=window.innerWidth/window.innerHeight,F=I>T?T/I:1;E=new Marzipano.FlatView({mediaAspectRatio:I,zoom:F},Marzipano.util.compose(Marzipano.FlatView.limit.resolution(A.width),Marzipano.FlatView.limit.letterbox()))}if(o&&c.addClass("x3-panorama"),u.index=s,u.hasOwnProperty("id")||(u.id=p.getAttribute("id")||(u.source||u.path).split("/").filter(Boolean).pop().replace(/\.(jpeg|jpg)$/i,"")),u.hasOwnProperty("title")||(u.title=p.getAttribute("data-title")||p.getAttribute("title")||u.id),u.title&&(u.title=u.title.charAt(0).toUpperCase()+u.title.slice(1)),u.exif=!!p.hasAttribute("data-exif")&&JSON.parse(p.getAttribute("data-exif")),u.description||(u.description=p.getAttribute("data-description")),u.date||(u.date=p.getAttribute("data-date")),u.geo){var V=u.geo.split(",");V.length>2&&(u.geo=V[0]+","+V[1],u.geo_zoom||(u.geo_zoom=parseInt(V[2])))}else u.geo=p.getAttribute("data-geo");-1===l.open&&(n===u.id?l.open=s:-1===r&&u.hasOwnProperty("open")&&(n?r=s:l.open=s)),u.scene_ob={source:P,geometry:k,view:E,pinFirstLevel:!!u.pinFirstLevel},u.original_view=E.parameters(),l.items.push(u),s++})),-1===l.open&&(l.open=r),e("pano_data ["+(o?"content":"gallery")+"]:",l),l}function ne(e,t,a){if(L.panorama.is_open)return!1;L.panorama.is_open=!0,c=e,G=t,Pe(!0);var o=c.items[t],r=q.scene_nav?c.items.length:1;r>1?c.items.forEach((function(e,t){e.scene=u.createScene(e.scene_ob)})):o.scene=u.createScene(o.scene_ob),q.reset_view&&o.scene_ob.view.setParameters(o.original_view),q.scene_nav&&M.toggleClass("hide",r<=1),q.index&&y.toggleClass("hide",r<=1),le(o,r),m.velocity("fadeIn",{duration:200,complete:function(){u.updateSize(),function(){if(!x3_tests.ios)return;n.on("orientationchange.pano",(function(e){var t=v[0].clientWidth,n=v[0].clientHeight;setTimeout((function(){v[0].clientWidth===t&&v[0].clientHeight===n||u.updateSize()}),500)}))}(),function(){if(!x3_tests.dual_input)return;var e;s.on("touchend.pano",(function(t){Z=!0,clearTimeout(e),e=setTimeout((function(){Z=!1}),300)}))}(),o.scene.switchTo({transitionDuration:je,transitionUpdate:Le()},(function(){!function(){x3_tests.mobile?_.add(x).addClass("pano-touch"):_.add(x).on("mouseenter.pano mouseleave.pano",(function(e){$(this).toggleClass("pano-hover","mouseenter"===e.type)}));if(!q.hide_interface)return void _e(!1);we(),v.on("mousemove.pano",$.throttle(Math.floor(q.hide_interface_timeout/10),!1,we)),x3_tests.touch&&(xe(_),xe(x))}(),(W||N)&&ue(!0),u.stage().addEventListener("renderComplete",Ce),function(){if("auto"!==q.zoom||!K)return;n.on("resize.pano",$.debounce(500,(function(e){se(c.items[G])})))}(),ze(o,r),oe(o,!0)})),X=a||f("pano")!=o.id&&!navigator.userAgent.match("CriOS"),history.pushState(null,o.id,"#pano="+o.id),n.one("popstate.pano",(function(e){ie(!1)})),function(e){s.on("keydown.pano",(function(e){[32,38,40].indexOf(e.which)>-1&&e.preventDefault()})),q.keyboard&&We.length&&(Ve=!1,z.find(".active").removeClass("active"),s.on("keydown.pano",(function(t){var n=t.which;if(Ve!==n){if(t.shiftKey&&e>1&&q.nav&&[37,39].indexOf(n)>-1)return!1;Ve=n,Ne(n,!0)}})));q.keyboard&&s.on("keyup.pano",(function(t){var n=t.which;if(t.shiftKey&&e>1&&[37,39].indexOf(n)>-1)ae(37===n?-1:1);else{if(27===n)return void ie(!0);if(32===n)return _e(!me),void(me&&_.add(x).removeClass("pano-hover"))}We.length&&Ne(n,!1)}))}(r)}})}function ie(e){if(!L.panorama.is_open)return!1;L.panorama.is_open=!1,q.autorotate_start?fe():ue(!1),[n,s,v,g,_,x].forEach((function(e){e.length&&e.off(".pano")})),X?e&&history.back():history.replaceState(null,document.title,location.pathname+location.search),V&&screenfull.exit(),m.velocity("fadeOut",{duration:200,complete:function(){Pe(!1),u.destroyAllScenes(),u.stage().removeEventListener("renderComplete",Ce),Ce(!0),_e(!0),_.add(x).removeClass("pano-hover")}})}function ae(e){oe(c.items[G]);var t=G+e,n=c.items.length;if(t<0||t>=n){if(!q.scene_loop)return;t=t<0?n-1:0}G=t;var a=c.items[G];q.reset_view&&a.scene_ob.view.setParameters(a.original_view),q.title&&"0"!=_.css("opacity")&&w.css("display","none"),n>1&&K&&k.add(R).css("display","none"),le(a,n),ge&&q.show_interface_after_nav&&we(),fe(),"opacity"!==Se&&a.scene.layer().setEffects({opacity:0}),a.scene.switchTo({transitionDuration:Re,transitionUpdate:Ee()},(function(){W?de():N&&ue(!0),q.title&&!w.is(":visible")&&re(w,!0,3*e,300),n>1&&K&&!Z&&(C.is(":hover")&&re(k,!0,3*e,200),P.is(":hover")&&re(R,!0,3*e,200)),q.show_interface_after_nav&&(!q.hide_interface&&q.keyboard?_e(!1):me&&we()),ze(a,n),oe(a,!0)})),history.replaceState(null,a.id,"#pano="+a.id)}function oe(t,n){if("flat"===t.type){var a=Math.min(t.levels.length,t.pin_levels||q.flat_pin_levels);if(!(a<2))for(var o=t.scene.layer(),i=1;i<a;i++)e((n?"pinLevel":"unpinLevel")+"("+i+")"),o[n?"pinLevel":"unpinLevel"](i)}}function re(e,t,n,a,o){e.velocity("stop").velocity({opacity:t?[1,0]:[0,1],translateX:t?[0,n]:[n,0]},{duration:a||300,easing:"easeOutQuint",display:t?o||"auto":"none"})}function se(e){if("auto"===q.zoom&&K){var t=e.hasOwnProperty("zoom")?e.zoom:"flat"===e.type||e.maxResolution>window.innerWidth*Y;O.toggleClass("pano-zoom-hidden",!t)}}function le(e,t){var n=!!(e.exif||e.description||e.geo);if(T.length&&T.toggleClass("hide",!n),q.title&&b.toggleClass("pano-title-info",n),I.length&&I.toggleClass("hide","flat"===e.type),A.data("visible")&&A.toggleClass("hide","flat"===e.type),se(e),q.scene_nav&&t>1){var a=G<=0?t-1:G-1,o=G>=t-1?0:G+1,r=!1,s=!1;q.scene_loop||(r=a>=G,C.toggleClass("hide",r),s=o<=G,P.toggleClass("hide",s),K&&(k.toggleClass("hide",r),R.toggleClass("hide",s))),K&&(r||k.html(c.items[a].title),s||R.html(c.items[o].title))}q.index&&t>1&&y.text(G+1+" / "+t),q.title&&b.html(e.title)}e("Settings:",q),L.panorama.init_page=function(e,n){var a=e.is(".context");if(t){var o=te(n,!L.panorama.is_open&&f("pano"),a);o.items.length&&(e.on("click",".x3-panorama",(function(e){e.target!==this&&$(e.target).is("button, .button, [data-href]")||(e.stopImmediatePropagation(),e.preventDefault(),ne(o,$(this).data("panorama").index,!0))})),L.panorama.is_open||(o.open>-1?ne(o,o.open):q.auto_open&&!a&&ne(o,0)))}else a?n.each((function(e,t){ye($(t))})):n.removeClass("x3-panorama")},L.panorama.init_pano=function(){if(t){!function(){var e="",t="";(q.buttons?(q.buttons+",close").replace("close,","").split(","):["close"]).forEach((function(e,i){t+='<button type="button" class="pano-button pano-'+e+(["deviceorientation","fullscreen"].indexOf(e)>-1?" hide":"")+'"></button>'})),e+='<div class="pano-controls">'+t+"</div>";var n="";q.index&&(n+='<span class="pano-index"></span>'),q.title&&(n+='<span class="pano-title"></span>'),(n+='<span class="pano-spinner"></span>')&&(e+='<div class="pano-text">'+n+"</div>"),e&&(e='<div class="pano-topbar">'+e+"</div>");var a="";q.scene_nav&&(a+='<div class="pano-scene-nav"><button type="button" class="pano-button pano-previous"></button><div class="pano-text pano-title-previous"></div><button type="button" class="pano-button pano-next"></button><div class="pano-text pano-title-next"></div></div>');var o="";F&&(o+='<div class="pano-zoom"'+(q.nav?' style="margin-right: 1em;"':"")+'><button type="button" class="pano-button pano-zoom-out"></button><button type="button" class="pano-button pano-zoom-in"></button></div>'),q.nav&&(o+='<button type="button" class="pano-button pano-left"></button><div class="pano-up-down"><button type="button" class="pano-button pano-up"></button><button type="button" class="pano-button pano-down"></button></div><button type="button" class="pano-button pano-right"></button>'),o&&(a+='<div class="pano-nav">'+o+"</div>"),a&&(e+='<div class="pano-bottombar">'+a+"</div>"),e&&(e='<div id="pano-interface" class="pano-interface-hide'+(K?" pano-pointer":"")+'">'+e+"</div>"),s.append('<div id="pano-container">'+e+'<div id="pano"></div></div>')}(),m=s.find("#pano-container"),v=m.find("#pano"),g=m.find("#pano-interface");var e=(_=g.find(".pano-topbar")).find(".pano-controls");A=e.find(".pano-deviceorientation"),w=_.find(".pano-text"),y=w.find(".pano-index"),b=w.find(".pano-title"),Oe=w.find(".pano-spinner"),x=g.find(".pano-bottombar"),z=x.find(".pano-nav"),O=z.find(".pano-zoom"),M=x.find(".pano-scene-nav"),C=M.find(".pano-previous"),k=M.find(".pano-title-previous"),P=M.find(".pano-next"),R=M.find(".pano-title-next");var a=(F?89:0)+(q.nav?134:0);if(a){F&&q.nav&&(a+=16);var o=Math.round(a/2+60);q.scene_nav&&jt("@media (min-width: 641px) { .pano-title-previous, .pano-title-next { max-width: calc(50% - "+o+"px); } }"),F&&q.nav&&(jt("@media (min-width: 1025px) { .pano-nav { margin-left: -106px; } }"),q.scene_nav&&(jt("@media (min-width: 1025px) { .pano-title-previous { max-width: calc(50% - "+(o+53)+"px); } }"),jt("@media (min-width: 1025px) { .pano-title-next { max-width: calc(50% - "+(o-53)+"px); }")))}if(u=new Marzipano.Viewer(v[0]),q.nav&&J.push([z.find(".pano-up"),"y",-.5,.75],[z.find(".pano-down"),"y",.5,.75],[z.find(".pano-left"),"x",-1],[z.find(".pano-right"),"x",1]),F&&J.push([z.find(".pano-zoom-in"),"zoom",-1],[z.find(".pano-zoom-out"),"zoom",1]),q.keyboard&&J.push([38,"y",-.5,.75],[40,"y",.5,.75],[37,"x",-1],[39,"x",1],[187,"zoom",-1],[189,"zoom",1],[107,"zoom",-1],[109,"zoom",1],[87,"y",-.5,.75],[65,"x",-1],[83,"y",.5,.75],[68,"x",1],[81,"roll",-4,6],[69,"roll",4,6]),J.length){d=u.controls(),J.forEach((function(e,i){var t=.4*e[2],n=1.2*(e[3]||1),a="number"==typeof e[0]?new Marzipano.KeyControlMethod(e[0],e[1],t,n):new Marzipano.ElementPressControlMethod(e[0][0],e[1],t,n);d.registerMethod("c"+i,a,!0)}))}var r=e.find(".pano-close");r.length&&r.on("click",(function(e){ie(!0)})),(T=e.find(".pano-info")).length&&T.on("click",D),q.title&&b.on("click",(function(e){$(this).hasClass("pano-title-info")&&D()}));var l=e.find(".pano-reset-view");l.length&&l.on("click",(function(e){l.data("translating")||(l.data("translating",!0),u.lookTo(c.items[G].original_view,{transitionDuration:500},(function(){l.data("translating",!1)})))}));var p=Marzipano.dependencies.hammerjs,f=e.find(".pano-fullscreen");(q.fullscreen_taps||f.length)&&H("screenfull",(function(e){if(!e)return f.remove(),!1;(f.removeClass("hide").on("click",(function(){screenfull.toggle()})),q.fullscreen_taps)&&new p(v[0]).on(1===q.fullscreen_taps?"tap":"doubletap",(function(e){V||screenfull.request()}));function t(){V=screenfull.isFullscreen,f.toggleClass("pano-is-fullscreen",V)}screenfull.on("change",t),t()})),(I=e.find(".pano-rotate")).length&&I.on("click",(function(){ue(!W)}));var S=q.autorotate_speed;if(h=Marzipano.autorotate({yawSpeed:S,yawAccel:S/2,pitchSpeed:Math.max(S,.1),pitchAccel:Math.max(S/2,.05)}),q.lookto_taps){function L(e,t,n){var a=u["_hammerManager"+e];a.manager().add(new p.Tap({taps:t,posThreshold:n})),a.on("tap",(function(e){var t=u.view().screenToCoordinates(e.center);u.lookTo(t,{transitionDuration:500})}))}K&&L("Mouse",q.lookto_taps,20),x3_tests.touch&&L("Touch",q.lookto_taps,50)}if(A.length)if(x3_tests.device_orientation){function j(){H("DeviceOrientationControlMethod",(function(e){if(!e)return A.remove(),!1;d.registerMethod("deviceOrientation",new DeviceOrientationControlMethod),A.removeClass("hide").data("visible",!0).on("click",(function(e){ce(!U)}))}))}x3_tests.device_oriented?j():n.one("deviceorientation.panotest",(function(e){var t=e.originalEvent.alpha;null===t||isNaN(t)||j()}))}else A.remove();if(q.scene_nav){function N(e,t,n){e.on("click",$.throttle(500,!0,(function(){ae(n)}))),K&&e.on("mouseenter mouseleave",(function(e){Z||re(t,"mouseenter"===e.type,3*n)}))}N(C,k,-1),N(P,R,1)}}function D(){var e=c.items[G],t=!1,n='<h2 class="pano-info-title">'+e.title+"</h3>";if(e.date&&(n+='<time class="pano-info-date">'+e.date+"</time>"),e.exif&&(n+='<div class="pano-info-exif">'+E(e.exif)+"</div>"),e.description&&(n+='<p class="pano-info-description">'+e.description+"</p>"),e.geo){var a=document.documentElement.clientWidth;if(a<=640)t=Math.min(100*Math.ceil(a/100),640);else{var o=document.documentElement.clientHeight;t=o<800?400:o<950?500:640}n+='<a href="https://www.google.com/maps/search/?api=1&amp;query='+e.geo+'" class="pano-info-map" target="_blank"><div class="pano-info-map-container"><img src="https://maps.googleapis.com/maps/api/staticmap?'+(x3_tests.pixel_ratio>1?"scale=2&amp;":"")+"zoom="+(e.geo_zoom||12)+"&amp;size="+t+"x"+t+"&amp;markers="+e.geo+'&amp;key=AIzaSyDRp6xla9SxUmTBu6l_kprhjjI9e5-EVZk" class="pano-info-map-image"></div></a>'}var r=Ie(n,t,"pano-info-modal");if(e.geo){var s=r.find(".pano-info-map-image");s.on("load",(function(e){s.css({opacity:1,transform:"scale(1)"})})),r.find(".pano-info-map").on("click",(function(t){ve("https://www.google.com/maps/embed/v1/place?q="+e.geo+"&amp;key=AIzaSyDRp6xla9SxUmTBu6l_kprhjjI9e5-EVZk",t).css("z-index",1542)}))}}};var pe=!1;function ce(e){U!==e&&(U=e,A.toggleClass("pano-is-deviceorientation",e),e?(pe=W,ue(!1),d.enableMethod("deviceOrientation")):(d.disableMethod("deviceOrientation"),pe&&ue(!0)))}function ue(e){D!==e&&(W=e,I.toggleClass("pano-rotating",e),e?de():fe())}function de(){D||(ce(!1),u.startMovement(h),u.setIdleMovement(q.autorotate_idlemovement_timeout,h),D=!0)}function fe(){D&&(u.stopMovement(),u.setIdleMovement(1/0),D=!1)}var he,me=!0,ge=!1;function _e(e){ge&&(ge=!1,clearTimeout(he)),me!==e&&(me=e,g.toggleClass("pano-interface-hide",e))}function xe(e){e.length&&e.on("touchstart.pano",".pano-button",(function(t){if("1"!=e.css("opacity"))return!1}))}function we(){_e(!1),ge=!0,he=setTimeout((function(){_e(!0)}),q.hide_interface_timeout)}function ye(e){var t=e.attr("data-href")||e.attr("href");t&&t.indexOf(".")>-1&&e.attr({"data-popup":"",rel:"pano-replacement-popup",href:(-1===t.indexOf("/")?x3_page.file_path+"/":"")+t.trim()})}function be(t){var n=c.items[t];n.scene_ob.pinFirstLevel||n.scene_ob.geometry.levelList.length<2||!u.hasScene(n.scene)||(e("pinFirstLevel: "+n.id),n.scene.layer().pinFirstLevel(),n.scene_ob.pinFirstLevel=!0)}function ze(e,t){t<2||setTimeout((function(){u.hasScene(e.scene)&&e.scene.visible()&&(be(G>=t-1?0:G+1),be(G<=0?t-1:G-1))}),2e3)}var Oe,Me=!1;function Ce(e){Me===e&&(Me=!Me,Oe.toggleClass("pano-spinning",Me))}function Pe(e){e!==B&&(e?(B=window.innerWidth-document.documentElement.clientWidth)&&(l[0].style["padding-right"]=B+"px",o[0].style.overflow="hidden"):(l[0].style.removeProperty("padding-right"),o[0].style.removeProperty("overflow"),B=!1))}var ke={opacity:function(){return function(e,t){var n=Fe(e),a={opacity:n};Te&&(a.rect=Te(n)),t.layer().setEffects(a)}},black:function(){return function(e,t,n){var a=Fe(e),o=a<.5,r=o?2*a:1-2*(a-.5),s=o?n.layer():t.layer(),l={colorOffset:[-r,-r,-r,0]};!o&&Te&&(l.rect=Te(a)),s.setEffects(l)}},black_first:function(){return function(e,t){var n=Fe(e),a=1-n,o={colorOffset:[-a,-a,-a,0]};Te&&(o.rect=Te(n)),t.layer().setEffects(o)}}},Se=q.transition,Ee=ke[Se],Le="black"===Se?ke.black_first:Ee,Re=q.transition_duration,je="black"===Se?Re/2:Re,Ae=q.transition_scale;if(Ae&&Re)var Te=function(e){return{relativeWidth:$e-e*Ae,relativeHeight:$e-e*Ae,relativeX:e*qe-qe,relativeY:e*qe-qe}},$e=1+Ae,qe=Ae/2;else Te=!1;function Fe(e){return-(Math.pow(e-1,4)-1)}var Ve=!1,We=(q.nav?[38,40,37,39]:[]).concat(F?[187,189]:[]);function Ne(e,t){var n=We.indexOf(e);if(n>-1){if(t&&"1"!=x.css("opacity"))return;Ve=!1,J[n][0].toggleClass("active",t)}}}();