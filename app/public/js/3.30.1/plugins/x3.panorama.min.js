/* www.photo.gallery X3.30.1 / x3.panorama.min.js / 2021-02-27 */
!function(){function e(e,t,n){L("panorama / "+e,t,n)}var t=!1,n=0;if(window.WebGLRenderingContext)try{var r=document.createElement("canvas");if(r.getContext){var l=r.getContext("webgl")||r.getContext("experimental-webgl");(t=!!(l&&l instanceof WebGLRenderingContext))&&(n=l.getParameter(l.MAX_TEXTURE_SIZE)),e("webgl_support: "+t,null,t?"log":"warn"),e("max_texture_size: "+n)}}catch(t){e("error while trying to detect WebGL",null,"error")}var p,u,d,f,h,v,g,_,x,y,w,b,z,O,M,C,P,k,E,R,j,A,I=x3_settings.plugins.panorama,T="hide"!==I.zoom,F=!1,V=I.autorotate_start,W=V&&I.autorotate_restart,D=!1,U=!1,H=0,G=!1,X=!1,B=x3_tests.is_pointer,K=!1,J=[],Q={yaw:0,pitch:0,fov:.79},Y=window.devicePixelRatio||1,ee=window.screen.availWidth*Y>=640?640:320;function te(t,a,o){var r=-1,s=0,l={items:[],open:-1};return t.each((function(t,p){var c=$(p);"object"!=typeof c.data("panorama")&&function(t,a){var o=a.data("panorama"),r={},s=!1;o&&"string"==typeof o?o.split("&").forEach((function(e,t){var n=e.split("=");if(n.length>1&&n[1].length){var a=n[1];r[n[0]]=isNaN(a)?"true"===a||"false"!==a&&a:Number(a)}else isNaN(e)?["equirect","cube","flat"].indexOf(e)>-1?r.type=e:e.indexOf("/")>-1||e.match(/\.(jpeg|jpg)$/i)?s=e:r[n[0]]=null:(r.hasOwnProperty("width")?r.hasOwnProperty("height")||(r.height=Number(e)):r.width=Number(e),r.type="equirect")})):o&&"number"==typeof o&&(r.type="equirect",r.width=o),r.hasOwnProperty("type")||(r.hasOwnProperty("width")?r.type=isNaN(r.width)?"flat":"equirect":r.hasOwnProperty("levels")||r.hasOwnProperty("path")?r.type="cube":r.type="equirect");var l="equirect"===r.type?"source":"path",p=r[l]||s||t.getAttribute("data-href")||t.getAttribute("href")||!1;if(p&&(p=p.trim()),p&&(0!==p.toLowerCase().indexOf("http")&&(p.indexOf("content/")>-1?p=x3_settings.path+"/content/"+p.split("content/")[1]:0!==p.indexOf("/")&&(p=x3_settings.path+x3_settings.file_path+"/"+p)),"path"!==l||r.path||s||(p=p.replace(/\.(jpeg|jpg)$/i,"").replace(/\/(?=[^\/]*$)/,"/_"))),r[l]=p?S(p).chompRight("/").s:"none","equirect"===r.type){var c=r.width||a.data("width")||!1,u=r.height||a.data("height")||!1;c&&u||(c?u=Math.floor(c/2):u?c=Math.floor(2*u):(c=4096,u=2048)),r.width=c,r.height=u,c>n&&r.hasOwnProperty("source_4096")&&(null===r.source_4096||!0===r.source_4096)&&(r.source_4096=r.source.replace(/\.(jpeg|jpg)$/i,"_4096.$1"))}else if("flat"===r.type){if(r.hasOwnProperty("url_format")){var d=r.url_format.trim(),f=d.replace(/%0*?[v|y]/g,"{y}").replace(/%0*?[h|x]/g,"{x}").replace(/%0*?l/g,"{z}").replace(/(^|\/)l[0-9](_|\/)/g,"$1l{z}$2").replace(/%0*?c/g,"0");if(f!==r.url_format&&(r.url_format_original=r.url_format,r.url_format=f),!r.hasOwnProperty("index_start")){var h=d.match(/(^|\/)l([0-9])[_|\/]/);r.index_start=h?Math.min(1,h[2]):0}if(!r.hasOwnProperty("zero_padding")){var m=d.match(/%0+?[h|y]/);r.zero_padding=m?m[0].length-1:0}}if(r.hasOwnProperty("width")&&r.hasOwnProperty("height")){var v=r.width.split(","),g=r.height.split(",");r.levels=[],v.forEach((function(e,t){r.levels.push({width:parseInt(e),height:parseInt(g[t])})})),delete r.width,delete r.height}}e("params_to_object: "+o,r),a.data("panorama",r)}(p,c);var u=c.data("panorama");if(["equirect","cube"].indexOf(u.type)>-1){var d={};Object.keys(Q).forEach((function(e){var t=u.hasOwnProperty(e)?u[e]:I[e];t!==Q[e]&&(3.14===Math.abs(t)&&(t=Math.PI*(t>0?1:-1)),d[e]=t)}));var f=u.hasOwnProperty("maxVFov")?u.maxVFov:I.max_vfov,h=u.hasOwnProperty("maxHFov")?u.maxHFov:I.max_hfov;0===h&&(h=null);var m=u.hasOwnProperty("pitch_min")?u.pitch_min:I.pitch_min,v=u.hasOwnProperty("pitch_max")?u.pitch_max:I.pitch_max,g=(-90!==m||90!==v)&&Marzipano.RectilinearView.limit.pitch(m/180*Math.PI,v/180*Math.PI)}if("equirect"===u.type){var _=u.source.indexOf("/content/")>-1&&0!==u.source.toLowerCase().indexOf("http"),x=u.source,y=u.width;if(y>n)if(n>=4096&&u.hasOwnProperty("source_4096"))x=u.source_4096,y=4096;else{if(!_||!I.equirect_resize)return e("Error: Source ["+x+"] width ["+y+"] is > device max_texture_size ["+n+"] and equirect_resize option is disabled, or source is not in content path.",null,"warn"),o?ye(c):c.removeClass("x3-panorama"),!0;x=gt(x,n),y=n}var w=[{width:y}],b=[x];if(_)if(u.hasOwnProperty("preview")?u.preview:I.equirect_preview){w.unshift({width:ee});var z=u.hasOwnProperty("source_4096")?u.source_4096:u.source;b.unshift(gt(z,ee))}var O=u.maxResolution||I.maxres_multiplier*y/4;u.hasOwnProperty("maxResolution")||(u.maxResolution=O);var M=Marzipano.RectilinearView.limit.traditional(O,f,h),C=g?Marzipano.util.compose(M,g):M,P=new Marzipano.ImageUrlSource((function(e){return{url:b[e.z]}})),k=new Marzipano.EquirectGeometry(w),E=new Marzipano.RectilinearView(d,C)}else if("cube"===u.type){P=Marzipano.ImageUrlSource.fromString(u.path+"/{z}/{f}/{y}/{x}.jpg",{cubeMapPreviewUrl:u.path+"/preview.jpg"});var L=function(e){if("object"==typeof e)return e;for(var t=256,n=[{tileSize:256,size:256,fallbackOnly:!0}],i=0;i<e;i++)n.push({tileSize:512,size:t*=2});return n}(u.levels||3);k=new Marzipano.CubeGeometry(L),O=u.maxResolution||I.maxres_multiplier*(u.face_size||L[L.length-1].size);u.hasOwnProperty("maxResolution")||(u.maxResolution=O);M=Marzipano.RectilinearView.limit.traditional(O,f,h),C=g?Marzipano.util.compose(M,g):M,E=new Marzipano.RectilinearView(d,C)}else{if("flat"!==u.type)return!0;var R=u.tilesize||I.flat_tile_size,j=u.levels;j[1].width<j[0].width&&j.reverse();var A=j[j.length-1];P=function(e){var t=e.url_format||I.flat_url_format,n=e.hasOwnProperty("zero_padding")?e.zero_padding:I.flat_zero_padding,a=e.hasOwnProperty("index_start")?e.index_start:I.flat_index_start;return new Marzipano.ImageUrlSource((function(o){return{url:e.path+"/"+t.replace(/{z}|{y}|{x}/gi,(function(e){return"{z}"===e?o.z+a:"{y}"===e?S(o.y+a).padLeft(n,"0").s:"{x}"===e?S(o.x+a).padLeft(n,"0").s:void 0}))}}))}(u);j.forEach((function(e){e.tileWidth=R,e.tileHeight=R}));k=new Marzipano.FlatGeometry(j);var T=A.width/A.height,q=window.innerWidth/window.innerHeight,F=T>q?q/T:1;E=new Marzipano.FlatView({mediaAspectRatio:T,zoom:F},Marzipano.util.compose(Marzipano.FlatView.limit.resolution(A.width),Marzipano.FlatView.limit.letterbox()))}if(o&&c.addClass("x3-panorama"),u.index=s,u.hasOwnProperty("id")||(u.id=p.getAttribute("id")||(u.source||u.path).split("/").filter(Boolean).pop().replace(/\.(jpeg|jpg)$/i,"")),u.hasOwnProperty("title")||(u.title=p.getAttribute("data-title")||p.getAttribute("title")||u.id),u.title&&"string"==typeof u.title&&(u.title=u.title.charAt(0).toUpperCase()+u.title.slice(1)),u.exif=!!p.hasAttribute("data-exif")&&JSON.parse(p.getAttribute("data-exif")),u.description||(u.description=p.getAttribute("data-description")),u.date||(u.date=p.getAttribute("data-date")),u.geo){var V=u.geo.split(",");V.length>2&&(u.geo=V[0]+","+V[1],u.geo_zoom||(u.geo_zoom=parseInt(V[2])))}else u.geo=p.getAttribute("data-geo");-1===l.open&&(a===u.id?l.open=s:-1===r&&u.hasOwnProperty("open")&&(a?r=s:l.open=s)),u.scene_ob={source:P,geometry:k,view:E,pinFirstLevel:!!u.pinFirstLevel},u.original_view=E.parameters(),l.items.push(u),s++})),-1===l.open&&(l.open=r),e("pano_data ["+(o?"content":"gallery")+"]:",l),l}function ne(e,t,n){if(Z.panorama.is_open)return!1;Z.panorama.is_open=!0,p=e,H=t,ke(!0);var a=p.items[t],r=I.scene_nav?p.items.length:1;r>1?p.items.forEach((function(e,t){e.scene=u.createScene(e.scene_ob)})):a.scene=u.createScene(a.scene_ob),I.reset_view&&a.scene_ob.view.setParameters(a.original_view),I.scene_nav&&M.toggleClass("hide",r<=1),I.index&&w.toggleClass("hide",r<=1),le(a,r),h.velocity("fadeIn",{duration:200,complete:function(){u.updateSize(),function(){if(!x3_tests.ios)return;o.on("orientationchange.pano",(function(e){var t=v[0].clientWidth,n=v[0].clientHeight;setTimeout((function(){v[0].clientWidth===t&&v[0].clientHeight===n||u.updateSize()}),500)}))}(),function(){if(!x3_tests.dual_input)return;var e;s.on("touchend.pano",(function(t){K=!0,clearTimeout(e),e=setTimeout((function(){K=!1}),300)}))}(),a.scene.switchTo({transitionDuration:Ae,transitionUpdate:Re()},(function(){!function(){x3_tests.mobile?_.add(x).addClass("pano-touch"):_.add(x).on("mouseenter.pano mouseleave.pano",(function(e){$(this).toggleClass("pano-hover","mouseenter"===e.type)}));if(!I.hide_interface)return void ge(!1);xe(),v.on("mousemove.pano",$.throttle(Math.floor(I.hide_interface_timeout/10),!1,xe)),x3_tests.touch&&(_e(_),_e(x))}(),(V||W)&&ue(!0),u.stage().addEventListener("renderComplete",Pe),function(){if("auto"!==I.zoom||!B)return;o.on("resize.pano",$.debounce(500,(function(e){se(p.items[H])})))}(),ze(a,r),oe(a,!0)})),G=n||m("pano")!=a.id&&!navigator.userAgent.match("CriOS"),history.pushState(null,a.id,"#pano="+a.id),o.one("popstate.pano",(function(e){ie(!1)})),function(e){s.on("keydown.pano",(function(e){[32,38,40].indexOf(e.which)>-1&&e.preventDefault()})),I.keyboard&&We.length&&(Ve=!1,z.find(".active").removeClass("active"),s.on("keydown.pano",(function(t){var n=t.which;if(Ve!==n){if(t.shiftKey&&e>1&&I.nav&&[37,39].indexOf(n)>-1)return!1;Ve=n,Ne(n,!0)}})));I.keyboard&&s.on("keyup.pano",(function(t){var n=t.which;if(t.shiftKey&&e>1&&[37,39].indexOf(n)>-1)ae(37===n?-1:1);else{if(27===n)return void ie(!0);if(32===n)return ge(!me),void(me&&_.add(x).removeClass("pano-hover"))}We.length&&Ne(n,!1)}))}(r)}})}function ie(e){if(!Z.panorama.is_open)return!1;Z.panorama.is_open=!1,I.autorotate_start?fe():ue(!1),[o,s,v,g,_,x].forEach((function(e){e.length&&e.off(".pano")})),G?e&&history.back():history.replaceState(null,document.title,location.pathname+location.search),F&&screenfull.exit(),h.velocity("fadeOut",{duration:200,complete:function(){ke(!1),u.destroyAllScenes(),u.stage().removeEventListener("renderComplete",Pe),Pe(!0),ge(!0),_.add(x).removeClass("pano-hover")}})}function ae(e){oe(p.items[H]);var t=H+e,n=p.items.length;if(t<0||t>=n){if(!I.scene_loop)return;t=t<0?n-1:0}H=t;var a=p.items[H];I.reset_view&&a.scene_ob.view.setParameters(a.original_view),I.title&&"0"!=_.css("opacity")&&y.css("display","none"),n>1&&B&&k.add(E).css("display","none"),le(a,n),ve&&I.show_interface_after_nav&&xe(),fe(),"opacity"!==Ee&&a.scene.layer().setEffects({opacity:0}),a.scene.switchTo({transitionDuration:je,transitionUpdate:Le()},(function(){V?de():W&&ue(!0),I.title&&!y.is(":visible")&&re(y,!0,3*e,300),n>1&&B&&!K&&(C.is(":hover")&&re(k,!0,3*e,200),P.is(":hover")&&re(E,!0,3*e,200)),I.show_interface_after_nav&&(!I.hide_interface&&I.keyboard?ge(!1):me&&xe()),ze(a,n),oe(a,!0)})),history.replaceState(null,a.id,"#pano="+a.id)}function oe(t,n){if("flat"===t.type){var a=Math.min(t.levels.length,t.pin_levels||I.flat_pin_levels);if(!(a<2))for(var o=t.scene.layer(),i=1;i<a;i++)e((n?"pinLevel":"unpinLevel")+"("+i+")"),o[n?"pinLevel":"unpinLevel"](i)}}function re(e,t,n,a,o){e.velocity("stop").velocity({opacity:t?[1,0]:[0,1],translateX:t?[0,n]:[n,0]},{duration:a||300,easing:"easeOutQuint",display:t?o||"auto":"none"})}function se(e){if("auto"===I.zoom&&B){var t=e.hasOwnProperty("zoom")?e.zoom:"flat"===e.type||e.maxResolution>window.innerWidth*Y;O.toggleClass("pano-zoom-hidden",!t)}}function le(e,t){var n=!!(e.exif||e.description||e.geo);if(A.length&&A.toggleClass("hide",!n),I.title&&b.toggleClass("pano-title-info",n),j.length&&j.toggleClass("hide","flat"===e.type),R.data("visible")&&R.toggleClass("hide","flat"===e.type),se(e),I.scene_nav&&t>1){var a=H<=0?t-1:H-1,o=H>=t-1?0:H+1,r=!1,s=!1;I.scene_loop||(r=a>=H,C.toggleClass("hide",r),s=o<=H,P.toggleClass("hide",s),B&&(k.toggleClass("hide",r),E.toggleClass("hide",s))),B&&(r||k.html(p.items[a].title),s||E.html(p.items[o].title))}I.index&&t>1&&w.text(H+1+" / "+t),I.title&&b.html(e.title)}e("Settings:",I),Z.panorama.init_page=function(e,n){var a=e.is(".context");if(t){var o=te(n,!Z.panorama.is_open&&m("pano"),a);o.items.length&&(e.on("click",".x3-panorama",(function(e){e.target!==this&&$(e.target).is("button, .button, [data-href]")||(e.stopImmediatePropagation(),e.preventDefault(),ne(o,$(this).data("panorama").index,!0))})),Z.panorama.is_open||(o.open>-1?ne(o,o.open):I.auto_open&&!a&&ne(o,0)))}else a?n.each((function(e,t){ye($(t))})):n.removeClass("x3-panorama")},Z.panorama.init_pano=function(){if(t){!function(){var e="",t="";(I.buttons?(I.buttons+",close").replace("close,","").split(","):["close"]).forEach((function(e,i){t+='<button type="button" class="pano-button pano-'+e+(["deviceorientation","fullscreen"].indexOf(e)>-1?" hide":"")+'"></button>'})),e+='<div class="pano-controls">'+t+"</div>";var n="";I.index&&(n+='<span class="pano-index"></span>'),I.title&&(n+='<span class="pano-title"></span>'),(n+='<span class="pano-spinner"></span>')&&(e+='<div class="pano-text">'+n+"</div>"),e&&(e='<div class="pano-topbar">'+e+"</div>");var a="";I.scene_nav&&(a+='<div class="pano-scene-nav"><button type="button" class="pano-button pano-previous"></button><div class="pano-text pano-title-previous"></div><button type="button" class="pano-button pano-next"></button><div class="pano-text pano-title-next"></div></div>');var o="";T&&(o+='<div class="pano-zoom"'+(I.nav?' style="margin-right: 1em;"':"")+'><button type="button" class="pano-button pano-zoom-out"></button><button type="button" class="pano-button pano-zoom-in"></button></div>'),I.nav&&(o+='<button type="button" class="pano-button pano-left"></button><div class="pano-up-down"><button type="button" class="pano-button pano-up"></button><button type="button" class="pano-button pano-down"></button></div><button type="button" class="pano-button pano-right"></button>'),o&&(a+='<div class="pano-nav">'+o+"</div>"),a&&(e+='<div class="pano-bottombar">'+a+"</div>"),e&&(e='<div id="pano-interface" class="pano-interface-hide'+(B?" pano-pointer":"")+'">'+e+"</div>"),s.append('<div id="pano-container">'+e+'<div id="pano"></div></div>')}(),h=s.find("#pano-container"),v=h.find("#pano"),g=h.find("#pano-interface");var e=(_=g.find(".pano-topbar")).find(".pano-controls");R=e.find(".pano-deviceorientation"),y=_.find(".pano-text"),w=y.find(".pano-index"),b=y.find(".pano-title"),Oe=y.find(".pano-spinner"),x=g.find(".pano-bottombar"),z=x.find(".pano-nav"),O=z.find(".pano-zoom"),M=x.find(".pano-scene-nav"),C=M.find(".pano-previous"),k=M.find(".pano-title-previous"),P=M.find(".pano-next"),E=M.find(".pano-title-next");var n=(T?89:0)+(I.nav?134:0);if(n){T&&I.nav&&(n+=16);var a=Math.round(n/2+60);I.scene_nav&&N("@media (min-width: 641px) { .pano-title-previous, .pano-title-next { max-width: calc(50% - "+a+"px); } }"),T&&I.nav&&(N("@media (min-width: 1025px) { .pano-nav { margin-left: -106px; } }"),I.scene_nav&&(N("@media (min-width: 1025px) { .pano-title-previous { max-width: calc(50% - "+(a+53)+"px); } }"),N("@media (min-width: 1025px) { .pano-title-next { max-width: calc(50% - "+(a-53)+"px); }")))}if(u=new Marzipano.Viewer(v[0]),I.nav&&J.push([z.find(".pano-up"),"y",-.5,.75],[z.find(".pano-down"),"y",.5,.75],[z.find(".pano-left"),"x",-1],[z.find(".pano-right"),"x",1]),T&&J.push([z.find(".pano-zoom-in"),"zoom",-1],[z.find(".pano-zoom-out"),"zoom",1]),I.keyboard&&J.push([38,"y",-.5,.75],[40,"y",.5,.75],[37,"x",-1],[39,"x",1],[187,"zoom",-1],[189,"zoom",1],[107,"zoom",-1],[109,"zoom",1],[87,"y",-.5,.75],[65,"x",-1],[83,"y",.5,.75],[68,"x",1],[81,"roll",-4,6],[69,"roll",4,6]),J.length){d=u.controls(),J.forEach((function(e,i){var t=.4*e[2],n=1.2*(e[3]||1),a="number"==typeof e[0]?new Marzipano.KeyControlMethod(e[0],e[1],t,n):new Marzipano.ElementPressControlMethod(e[0][0],e[1],t,n);d.registerMethod("c"+i,a,!0)}))}var r=e.find(".pano-close");r.length&&r.on("click",(function(e){ie(!0)})),(A=e.find(".pano-info")).length&&A.on("click",X),I.title&&b.on("click",(function(e){$(this).hasClass("pano-title-info")&&X()}));var l=e.find(".pano-reset-view");l.length&&l.on("click",(function(e){l.data("translating")||(l.data("translating",!0),u.lookTo(p.items[H].original_view,{transitionDuration:500},(function(){l.data("translating",!1)})))}));var c=Marzipano.dependencies.hammerjs,m=e.find(".pano-fullscreen");if(screenfull.isEnabled&&(I.fullscreen_taps||m.length)){if(m.removeClass("hide").on("click",(function(){screenfull.toggle()})),I.fullscreen_taps)new c(v[0]).on(1===I.fullscreen_taps?"tap":"doubletap",(function(e){F||screenfull.request()}));function S(){F=screenfull.isFullscreen,m.toggleClass("pano-is-fullscreen",F)}screenfull.on("change",S),S()}else m.remove();(j=e.find(".pano-rotate")).length&&j.on("click",(function(){ue(!V)}));var L=I.autorotate_speed;if(f=Marzipano.autorotate({yawSpeed:L,yawAccel:L/2,pitchSpeed:Math.max(L,.1),pitchAccel:Math.max(L/2,.05)}),I.lookto_taps){function W(e,t,n){var a=u["_hammerManager"+e];a.manager().add(new c.Tap({taps:t,posThreshold:n})),a.on("tap",(function(e){var t=u.view().screenToCoordinates(e.center);u.lookTo(t,{transitionDuration:500})}))}B&&W("Mouse",I.lookto_taps,20),x3_tests.touch&&W("Touch",I.lookto_taps,50)}if(R.length)if(x3_tests.device_orientation){function D(){q("DeviceOrientationControlMethod",(function(e){if(!e)return R.remove(),!1;d.registerMethod("deviceOrientation",new DeviceOrientationControlMethod),R.removeClass("hide").data("visible",!0).on("click",(function(e){ce(!U)}))}))}x3_tests.device_oriented?D():o.one("deviceorientation.panotest",(function(e){var t=e.originalEvent.alpha;null===t||isNaN(t)||D()}))}else R.remove();if(I.scene_nav){function G(e,t,n){e.on("click",$.throttle(500,!0,(function(){ae(n)}))),B&&e.on("mouseenter mouseleave",(function(e){K||re(t,"mouseenter"===e.type,3*n)}))}G(C,k,-1),G(P,E,1)}}function X(){var e=p.items[H],t=!1,n='<h2 class="pano-info-title">'+e.title+"</h3>";if(e.date&&(n+='<time class="pano-info-date">'+e.date+"</time>"),e.exif&&(n+='<div class="pano-info-exif">'+parse_exif(e.exif)+"</div>"),e.description&&(n+='<p class="pano-info-description">'+e.description+"</p>"),e.geo){var a=document.documentElement.clientWidth;if(a<=640)t=Math.min(100*Math.ceil(a/100),640);else{var o=document.documentElement.clientHeight;t=o<800?400:o<950?500:640}n+='<a href="https://www.google.com/maps/search/?api=1&amp;query='+e.geo+'" class="pano-info-map" target="_blank"><div class="pano-info-map-container"><img src="https://maps.googleapis.com/maps/api/staticmap?'+(x3_tests.pixel_ratio>1?"scale=2&amp;":"")+"zoom="+(e.geo_zoom||12)+"&amp;size="+t+"x"+t+"&amp;markers="+e.geo+'&amp;key=AIzaSyDRp6xla9SxUmTBu6l_kprhjjI9e5-EVZk" class="pano-info-map-image"></div></a>'}var r=Me(n,t,"pano-info-modal");if(e.geo){var s=r.find(".pano-info-map-image");s.on("load",(function(e){s.css({opacity:1,transform:"scale(1)"})})),r.find(".pano-info-map").on("click",(function(t){we("https://www.google.com/maps/embed/v1/place?q="+e.geo+"&amp;key=AIzaSyDRp6xla9SxUmTBu6l_kprhjjI9e5-EVZk",t).css("z-index",1542)}))}}};var pe=!1;function ce(e){U!==e&&(U=e,R.toggleClass("pano-is-deviceorientation",e),e?(pe=V,ue(!1),d.enableMethod("deviceOrientation")):(d.disableMethod("deviceOrientation"),pe&&ue(!0)))}function ue(e){D!==e&&(V=e,j.toggleClass("pano-rotating",e),e?de():fe())}function de(){D||(ce(!1),u.startMovement(f),u.setIdleMovement(I.autorotate_idlemovement_timeout,f),D=!0)}function fe(){D&&(u.stopMovement(),u.setIdleMovement(1/0),D=!1)}var he,me=!0,ve=!1;function ge(e){ve&&(ve=!1,clearTimeout(he)),me!==e&&(me=e,g.toggleClass("pano-interface-hide",e))}function _e(e){e.length&&e.on("touchstart.pano",".pano-button",(function(t){if("1"!=e.css("opacity"))return!1}))}function xe(){ge(!1),ve=!0,he=setTimeout((function(){ge(!0)}),I.hide_interface_timeout)}function ye(e){var t=e.attr("data-href")||e.attr("href");t&&t.indexOf(".")>-1&&e.attr({"data-popup":"",rel:"pano-replacement-popup",href:(-1===t.indexOf("/")?x3_page.file_path+"/":"")+t.trim()})}function be(t){var n=p.items[t];n.scene_ob.pinFirstLevel||n.scene_ob.geometry.levelList.length<2||!u.hasScene(n.scene)||(e("pinFirstLevel: "+n.id),n.scene.layer().pinFirstLevel(),n.scene_ob.pinFirstLevel=!0)}function ze(e,t){t<2||setTimeout((function(){u.hasScene(e.scene)&&e.scene.visible()&&(be(H>=t-1?0:H+1),be(H<=0?t-1:H-1))}),2e3)}var Oe,Ce=!1;function Pe(e){Ce===e&&(Ce=!Ce,Oe.toggleClass("pano-spinning",Ce))}function ke(e){e!==X&&(e?(X=window.innerWidth-document.documentElement.clientWidth)&&(c[0].style["padding-right"]=X+"px",a[0].style.overflow="hidden"):(c[0].style.removeProperty("padding-right"),a[0].style.removeProperty("overflow"),X=!1))}var Se={opacity:function(){return function(e,t){var n=Fe(e),a={opacity:n};Te&&(a.rect=Te(n)),t.layer().setEffects(a)}},black:function(){return function(e,t,n){var a=Fe(e),o=a<.5,r=o?2*a:1-2*(a-.5),s=o?n.layer():t.layer(),l={colorOffset:[-r,-r,-r,0]};!o&&Te&&(l.rect=Te(a)),s.setEffects(l)}},black_first:function(){return function(e,t){var n=Fe(e),a=1-n,o={colorOffset:[-a,-a,-a,0]};Te&&(o.rect=Te(n)),t.layer().setEffects(o)}}},Ee=I.transition,Le=Se[Ee],Re="black"===Ee?Se.black_first:Le,je=I.transition_duration,Ae="black"===Ee?je/2:je,Ie=I.transition_scale;if(Ie&&je)var Te=function(e){return{relativeWidth:$e-e*Ie,relativeHeight:$e-e*Ie,relativeX:e*qe-qe,relativeY:e*qe-qe}},$e=1+Ie,qe=Ie/2;else Te=!1;function Fe(e){return-(Math.pow(e-1,4)-1)}var Ve=!1,We=(I.nav?[38,40,37,39]:[]).concat(T?[187,189]:[]);function Ne(e,t){var n=We.indexOf(e);if(n>-1){if(t&&"1"!=x.css("opacity"))return;Ve=!1,J[n][0].toggleClass("active",t)}}}();